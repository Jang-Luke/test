<%@ page language="java" contentType="text/html; charset=UTF-8"
    pageEncoding="UTF-8"%>
<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
<script src="https://code.jquery.com/jquery-3.7.0.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
<style>
	*{
		box-sizing: border-box;
		margin: 0;
		padding: 0;
	}
	.container{
		width: 70%;
		height: 600px;
	}
	.chat-body{
		width: 100%;
		height: 80%;
	}
	.chat-input{
		width: 100%;
		height: 20%;
	}
</style>
</head>
<body>
	<div class="container">
		<div class="chat-body">
		
		</div>
		<div class="chat-input">
			<input type="text" class="chat">
			<input type="submit" class="send" value="전송">
		</div>
	</div>
	
	<script>
		const ws = new WebSocket("ws://192.168.0.74/chat");
		
		$(".send").on("click", function() {
			let msg = $(".chat").val();
			ws.send(msg);
		});
        $(".chat").on("keyup", function(e) {
            if(e.key == "Enter") {
                let msg = $(".chat").val();
			    ws.send(msg);
            }
        });

        const onmessage = function(e) {
            const msg = e.data;
            const chat_line = $("<p style='background-color:#00000030;'>").append(msg.id).append(" : ").append(msg.message);
        }
	</script>
</body>
</html>